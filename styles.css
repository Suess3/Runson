/* ---------- Theme tokens ---------- */
:root{
  --bg: #f4f8fb;
  --card: #ffffff;
  --ink: #111;
  --muted: #5d6b78;
  --line: #d6dee6;
  --accent: #0b57d0;
  --accent-ink: #fff;
}

/* ---------- Base ---------- */
*{ box-sizing:border-box; }
html,body{ height:100%; }
body{
  margin:0; background:var(--bg); color:var(--ink);
  font: 16px/1.45 system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
}
.wrap{ max-width:920px; margin: 24px auto; padding: 0 14px; }

/* ---------- Header ---------- */
.app-header{
  display:flex; align-items:center; justify-content:space-between;
  gap:12px; margin-bottom: 14px;
}
.app-header h1{
  font-size: 2rem; margin:0; letter-spacing:.2px;
  font-family: ui-rounded, system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
}
.nav{ display:flex; gap:8px; align-items:center; flex-wrap:wrap; }

/* ---------- Buttons & Chips ---------- */
.btn{
  appearance:none; border:1px solid var(--line); background:#fff;
  padding:6px 10px; border-radius:10px; cursor:pointer;
}
.btn:hover{ border-color:#c6d0da; }
.btn:active{ transform: translateY(1px); }
.btn.primary{ background:var(--accent); border-color:var(--accent); color:var(--accent-ink); }
.btn.sm{ padding:4px 8px; font-size:.9rem; border-radius:8px; }
.btn.danger{ border-color:#e5a1a1; color:#b71c1c; background:#fff5f5; }

.chip{
  display:inline-block; font-size:.9rem; padding:4px 8px; border-radius:999px;
  background:#e7f0ff; color:#0b57d0; border:1px solid #cfe0ff;
}
.hidden{ display:none !important; }

/* ---------- Panels & Layout bits ---------- */
.panel{
  background:var(--card);
  border:1px solid var(--line);
  border-radius:14px;
  padding:14px;
  box-shadow:0 2px 10px rgba(10,20,40,.04);
}
.row{ display:flex; gap:10px; }
.grow{ flex:1 1 0; }

label{ display:block; font-weight:600; margin:4px 0 6px; color:#23313d; }
input, select, textarea{
  width:100%; padding:8px 10px; border:1px solid var(--line); border-radius:10px;
  background:#fff;
}
textarea{ min-height:70px; resize:vertical; }

/* helpers */
.muted{ color:var(--muted); }
.num{ font-variant-numeric: tabular-nums; }

/* ---------- KPIs ---------- */
.kpis{ display:grid; grid-template-columns: repeat(4, minmax(0,1fr)); gap:10px; }
.kpi{
  border:1px solid var(--line); border-radius:12px; padding:10px; background:#fff;
}
.kpi .label{ color:var(--muted); font-size:.95rem; }
.kpi .value{ font-size:1.35rem; font-weight:700; }

/* FILLED variants â€“ stronger specificity for the gap box */
.kpi.good{ background:#eaf8ef; border-color:#b7e3c0; }
.kpi.bad { background:#fff1f1; border-color:#f2bcbc; }
.kpi.good .value{ color:#0f6a2a; }
.kpi.bad  .value{ color:#8b1e1e; }
/* Make sure the specific gap box wins even if other styles exist */
#kpiGap.good{ background:#eaf8ef; border-color:#b7e3c0; }
#kpiGap.bad { background:#fff1f1; border-color:#f2bcbc; }

/* ---------- Chart ---------- */
.chart-wrap{
  position:relative; background:#fff; border:1px solid var(--line); border-radius:12px; padding:8px;
}
#chart{ width:100%; height:280px; display:block; }
#chartTip{
  position:absolute; transform:translate(-50%, -130%);
  background:#111; color:#fff; font-size:.85rem; padding:8px 10px; border-radius:10px;
  pointer-events:none; display:none; white-space:nowrap;
  box-shadow:0 6px 18px rgba(0,0,0,.15);
}

/* ---------- Tables ---------- */
.table-wrap{ overflow:auto; border:1px solid var(--line); border-radius:12px; background:#fff; }
table{ border-collapse:separate; border-spacing:0; width:100%; }
thead th{
  position:sticky; top:0; background:#f6f9fc; z-index:1;
  text-align:left; padding:10px; border-bottom:1px solid var(--line);
}
tbody td{ padding:10px; border-bottom:1px solid #eef2f6; }
tbody tr:hover{ background:#fafcff; }
.col-date{ width:120px; }
.col-time,.col-pace,.col-delta{ width:90px; text-align:right; }
.col-note{ min-width:220px; }
.col-act{ width:80px; text-align:right; }

/* ---------- Progress battery ---------- */
.progress-card{
  margin: 14px 0 10px;
  padding: 12px;
  border: 1px solid var(--line);
  border-radius: 12px;
  background: #fff9;
  backdrop-filter: blur(2px);
}
.progress-card.disabled{ opacity: 0.7; }
.progress{
  display:flex; align-items:center; gap:8px;
}
.progress-cells{
  display:grid; grid-template-columns: repeat(20, 1fr);
  gap:2px; width:100%;
}
.progress-cells div{
  height:12px; border-radius:2px; border:1px solid var(--line);
  background:linear-gradient(#fff, #f8fafc);
}
.progress-head{ display:flex; align-items:center; gap:8px; }
.progress-head b{ font-variant-numeric: tabular-nums; }
.progress-tip{
  width: 10px;
  height: 18px;
  border: 2px solid var(--line);
  border-left: none;
  border-radius: 0 6px 6px 0;
  background: #fff;
}
.progress-meta{
  display:flex; flex-wrap:wrap; gap:10px 16px;
  margin-top: 8px;
  color: var(--muted);
  font-size: .95rem;
}
.progress-meta b{ color: var(--ink); }

/* ---------- Home image (smaller, centered) ---------- */
.home-art{
  margin:12px auto 0;
  display:flex;
  justify-content:center;
}
.home-art img{
  width: min(380px, 88%);   /* responsive, capped */
  margin: 0 auto;
  height:auto;
  display:block;
  border-radius:12px;
  border:1px solid var(--line);
}
